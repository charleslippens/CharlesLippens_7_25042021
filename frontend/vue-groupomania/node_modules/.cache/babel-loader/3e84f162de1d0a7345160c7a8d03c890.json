{"remainingRequest":"C:\\Users\\Pierre\\Desktop\\CharlesLippens_7_25042021-main (9)\\CharlesLippens_7_25042021-main\\frontend\\vue-groupomania\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Pierre\\Desktop\\CharlesLippens_7_25042021-main (9)\\CharlesLippens_7_25042021-main\\frontend\\vue-groupomania\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Pierre\\Desktop\\CharlesLippens_7_25042021-main (9)\\CharlesLippens_7_25042021-main\\frontend\\vue-groupomania\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\Pierre\\Desktop\\CharlesLippens_7_25042021-main (9)\\CharlesLippens_7_25042021-main\\frontend\\vue-groupomania\\src\\views\\Profile.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Pierre\\Desktop\\CharlesLippens_7_25042021-main (9)\\CharlesLippens_7_25042021-main\\frontend\\vue-groupomania\\src\\views\\Profile.vue","mtime":1621927147896},{"path":"C:\\Users\\Pierre\\Desktop\\CharlesLippens_7_25042021-main (9)\\CharlesLippens_7_25042021-main\\frontend\\vue-groupomania\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Pierre\\Desktop\\CharlesLippens_7_25042021-main (9)\\CharlesLippens_7_25042021-main\\frontend\\vue-groupomania\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Pierre\\Desktop\\CharlesLippens_7_25042021-main (9)\\CharlesLippens_7_25042021-main\\frontend\\vue-groupomania\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Pierre\\Desktop\\CharlesLippens_7_25042021-main (9)\\CharlesLippens_7_25042021-main\\frontend\\vue-groupomania\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHsgTm90eWYgfSBmcm9tICJub3R5ZiI7CmltcG9ydCAibm90eWYvbm90eWYubWluLmNzcyI7CmltcG9ydCBOYXYgZnJvbSAiQC9jb21wb25lbnRzL05hdi52dWUiOwppbXBvcnQgRGVsZXRlQWNjb3VudCBmcm9tICJAL2NvbXBvbmVudHMvRGVsZXRlQWNjb3VudC52dWUiOwppbXBvcnQgUHJvZmlsZUltYWdlIGZyb20gIi4uL2NvbXBvbmVudHMvUHJvZmlsZUltYWdlLnZ1ZSI7CmltcG9ydCBqd3REZWNvZGUgZnJvbSAnand0LWRlY29kZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUHJvZmlsZSIsCiAgY29tcG9uZW50czogewogICAgTmF2OiBOYXYsCiAgICBEZWxldGVBY2NvdW50OiBEZWxldGVBY2NvdW50LAogICAgUHJvZmlsZUltYWdlOiBQcm9maWxlSW1hZ2UKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByZXZlbGU6IGZhbHNlLAogICAgICB1c2VyOiAiIiwKICAgICAgaW1hZ2VQcm9maWxlOiBudWxsCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZGlzcGxheVByb2ZpbGUoKTsKICAgIHRoaXMubm90eWYgPSBuZXcgTm90eWYoewogICAgICBkdXJhdGlvbjogMjAwMCwKICAgICAgcG9zaXRpb246IHsKICAgICAgICB4OiAiY2VudGVyIiwKICAgICAgICB5OiAidG9wIgogICAgICB9CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIFBlcm1ldCBkJ2FmZmljaGVyIGxlcyBpbmZvcm1hdGlvbnMgZGUgcHJvZmlsCiAgICBkaXNwbGF5UHJvZmlsZTogZnVuY3Rpb24gZGlzcGxheVByb2ZpbGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgdG9rZW5yZWN1cCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpOwogICAgICB2YXIgZGVjb2RldG9rZW4gPSBqd3REZWNvZGUodG9rZW5yZWN1cCk7CiAgICAgIHZhciB1c2VySWQgPSBkZWNvZGV0b2tlbi51c2VySWQ7CiAgICAgIGF4aW9zLmdldCgiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS91c2VyLyIgKyB1c2VySWQsIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKQogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy51c2VyID0gcmVzcG9uc2UuZGF0YTsKICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgdmFyIG1zZ2Vycm9yID0gZXJyb3IucmVzcG9uc2UuZGF0YTsKCiAgICAgICAgX3RoaXMubm90eWYuZXJyb3IobXNnZXJyb3IuZXJyb3IpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyBQZXJtZXQgZGUgbW9kaWZpZXIgbGEgcGhvdG8gZGUgcHJvZmlsCiAgICB1cGxvYWRGaWxlOiBmdW5jdGlvbiB1cGxvYWRGaWxlKCkgewogICAgICB0aGlzLiRyZWZzLmZpbGVVcGxvYWQuY2xpY2soKTsKICAgIH0sCiAgICBvbkZpbGVTZWxlY3RlZDogZnVuY3Rpb24gb25GaWxlU2VsZWN0ZWQoZXZlbnQpIHsKICAgICAgdGhpcy5pbWFnZVByb2ZpbGUgPSBldmVudC50YXJnZXQuZmlsZXNbMF07CiAgICB9LAogICAgbW9kaWZ5UHJvZmlsZTogZnVuY3Rpb24gbW9kaWZ5UHJvZmlsZSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgdG9rZW5yZWN1cCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpOwogICAgICB2YXIgZGVjb2RldG9rZW4gPSBqd3REZWNvZGUodG9rZW5yZWN1cCk7CiAgICAgIHZhciB1c2VySWQgPSBkZWNvZGV0b2tlbi51c2VySWQ7CiAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoImltYWdlIiwgdGhpcy5pbWFnZVByb2ZpbGUpOwogICAgICBheGlvcy5wdXQoImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvdXNlci8iICsgdXNlcklkLCBmb3JtRGF0YSwgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIiArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpLAogICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJtdWx0aXBhcnQvZm9ybS1kYXRhIgogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLm5vdHlmLnN1Y2Nlc3MoIlZvdHJlIHByb2ZpbCBhIGJpZW4gw6l0w6kgbW9kaWZpw6kgISIpOwoKICAgICAgICBfdGhpczIuZGlzcGxheVByb2ZpbGUoKTsKICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgdmFyIG1zZ2Vycm9yID0gZXJyb3IucmVzcG9uc2UuZGF0YTsKCiAgICAgICAgX3RoaXMyLm5vdHlmLmVycm9yKG1zZ2Vycm9yLmVycm9yKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8gUGVybWV0IGQnYWZmaWNoZXIgbGEgYm/DrnRlIG1vZGFsZSBwb3VyIGxhIHN1cHByZXNzaW9uIGR1IGNvbXB0ZQogICAgZGlzcGxheU1vZGFsZTogZnVuY3Rpb24gZGlzcGxheU1vZGFsZSgpIHsKICAgICAgdGhpcy5yZXZlbGUgPSAhdGhpcy5yZXZlbGU7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["C:\\Users\\Pierre\\Desktop\\CharlesLippens_7_25042021-main (9)\\CharlesLippens_7_25042021-main\\frontend\\vue-groupomania\\src\\views\\Profile.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\t<div>\n\t\t<Nav />\n\t\t<div class=\"bg\">\n\t\t\t<h1 v-if=\"user\">Bienvenue {{ user.username }} !</h1>\n\n\t\t\t<div class=\"profile\">\n\t\t\t\t<h2>Vos informations</h2>\n\n\t\t\t\t<div class=\"profile__photo\">\n\t\t\t\t\t<ProfileImage :src=\"user.imageProfile\" class=\"profile__photo__image\" />\n\n\t\t\t\t\t<div class=\"profile__photo__modify\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"uploadFile\"\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tclass=\"profile__photo__modify__btnInvisible\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i class=\"far fa-edit\"></i> Modifier ma photo de profil\n\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\tref=\"fileUpload\"\n\t\t\t\t\t\t\t@change=\"onFileSelected\"\n\t\t\t\t\t\t\taccept=\"image/*\"\n\t\t\t\t\t\t\tid=\"file-input\"\n\t\t\t\t\t\t\taria-label=\"Modifier ma photo de profil\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"profile__info\">\n\t\t\t\t\t<p class=\"profile__info__title\">Pseudo</p>\n\t\t\t\t\t<div class=\"profile__info__text\">{{ user.username }}</div>\n\n\t\t\t\t\t<p class=\"profile__info__title\">Email</p>\n\t\t\t\t\t<div class=\"profile__info__text\">{{ user.email }}</div>\n\t\t\t\t</div>\n\n\t\t\t\t<button @click=\"modifyProfile\" class=\"profile__smallButton\">\n\t\t\t\t\tEnregister <i class=\"fas fa-check\"></i>\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<DeleteAccount v-bind:revele=\"revele\" v-bind:displayModale=\"displayModale\" />\n\t\t\t<button class=\"profile__bigButton\" v-on:click=\"displayModale\">\n\t\t\t\tSupprimer mon compte <i class=\"far fa-trash-alt\"></i>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { Notyf } from \"notyf\";\nimport \"notyf/notyf.min.css\";\n\nimport Nav from \"@/components/Nav.vue\";\nimport DeleteAccount from \"@/components/DeleteAccount.vue\";\nimport ProfileImage from \"../components/ProfileImage.vue\";\nimport jwtDecode from 'jwt-decode';\n\n\nexport default {\n\tname: \"Profile\",\n\tcomponents: {\n\t\tNav,\n\t\tDeleteAccount,\n\t\tProfileImage,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\trevele: false,\n\t\t\tuser: \"\",\n\t\t\timageProfile: null,\n\t\t};\n\t},\n\tcreated() {\n\t\tthis.displayProfile();\n\t\tthis.notyf = new Notyf({\n\t\t\tduration: 2000,\n\t\t\tposition: {\n\t\t\t\tx: \"center\",\n\t\t\t\ty: \"top\",\n\t\t\t},\n\t\t});\n\t},\n\tmethods: {\n\t\t// Permet d'afficher les informations de profil\n\t\tdisplayProfile() {\n\t\t\tconst tokenrecup = localStorage.getItem(\"token\");\n\t\t\tconst decodetoken = jwtDecode(tokenrecup);\n\t\t\tconst userId = decodetoken.userId;\n\n\t\t\taxios\n\t\t\t\t.get(\"http://localhost:3000/api/user/\" + userId, {\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tAuthorization: \"Bearer \" + localStorage.getItem(\"token\"),\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.user = response.data;\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconst msgerror = error.response.data;\n\t\t\t\t\tthis.notyf.error(msgerror.error);\n\t\t\t\t});\n\t\t},\n\n\t\t// Permet de modifier la photo de profil\n\t\tuploadFile() {\n\t\t\tthis.$refs.fileUpload.click();\n\t\t},\n\t\tonFileSelected(event) {\n\t\t\tthis.imageProfile = event.target.files[0];\n\t\t},\n\t\tmodifyProfile() {\n\t\t\tconst tokenrecup = localStorage.getItem(\"token\");\n\t\t\tconst decodetoken = jwtDecode(tokenrecup);\n\t\t\tconst userId = decodetoken.userId\n\t\t\tconst formData = new FormData();\n\t\t\tformData.append(\"image\", this.imageProfile);\n\n\t\t\taxios\n\t\t\t\t.put(\"http://localhost:3000/api/user/\" + userId, formData, {\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tAuthorization: \"Bearer \" + localStorage.getItem(\"token\"),\n\t\t\t\t\t\t\"Content-Type\": \"multipart/form-data\",\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.notyf.success(\"Votre profil a bien été modifié !\");\n\t\t\t\t\tthis.displayProfile();\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconst msgerror = error.response.data;\n\t\t\t\t\tthis.notyf.error(msgerror.error);\n\t\t\t\t});\n\t\t},\n\n\t\t// Permet d'afficher la boîte modale pour la suppression du compte\n\t\tdisplayModale() {\n\t\t\tthis.revele = !this.revele;\n\t\t},\n\t},\n};\n</script>\n\n<style scoped lang=\"scss\">\n.bg {\n\tbackground: rgb(228, 225, 225);\n\tbackground-size: cover, contain;\n\theight: 100vh;\n}\nh1,\nh2 {\n\tmargin-top: 2rem;\n}\n.profile {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tmin-width: 40%;\n\tmax-width: 60%;\n\tmargin: 3rem auto;\n\tbackground: #c7c7c7;\n\tborder-radius: 25px;\n\t@media (max-width: 500px) {\n\t\tmin-width: 80%;\n\t}\n\t&__photo {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tmargin-top: 1rem;\n\t\t&__image {\n\t\t\tmargin-right: 1rem;\n\t\t\tmargin-bottom: 0.5rem;\n\t\t}\n\t\t&__modify > input {\n\t\t\tdisplay: none;\n\t\t}\n\t\t&__modify__btnInvisible {\n\t\t\tborder: none;\n\t\t\tbackground-color: #c7c7c7;\n\t\t\tcolor: #3f3d56;\n\t\t\t&:hover,\n\t\t\t&:focus {\n\t\t\t\tcolor: white;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t}\n\t}\n\t&__info {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\ttext-align: left;\n\t\tmargin: 1rem;\n\t\t&__title {\n\t\t\tfont-weight: bold;\n\t\t\tmargin: 1rem 0 0.4rem 0;\n\t\t}\n\t\t&__text {\n\t\t\tbackground: white;\n\t\t\tborder-radius: 10px;\n\t\t\tpadding: 0.5rem;\n\t\t\twidth: 15rem;\n\t\t}\n\t}\n\t&__smallButton {\n\t\tborder: 2px solid #3f3d56;\n\t\tborder-radius: 25px;\n\t\tcolor: #3f3d56;\n\t\tfont-size: 15px;\n\t\tfont-weight: bold;\n\t\tpadding: 0.4rem;\n\t\tmargin: 1rem;\n\t\toutline-style: none;\n\t\tbackground: white;\n\t\t&:hover,\n\t\t&:focus {\n\t\t\tcolor: #ff6363;\n\t\t\tcursor: pointer;\n\t\t}\n\t}\n\t&__bigButton {\n\t\tborder: 3px solid #3f3d56;\n\t\tborder-radius: 25px;\n\t\tcolor: #3f3d56;\n\t\tfont-size: 15px;\n\t\tfont-weight: bold;\n\t\tpadding: 0.9rem;\n\t\tmargin: 1rem;\n\t\toutline-style: none;\n\t\t&:hover,\n\t\t&:focus {\n\t\t\tborder: 3px solid #ff6363;\n\t\t\tcolor: #ff6363;\n\t\t\tcursor: pointer;\n\t\t}\n\t}\n}\n</style>\n"],"sourceRoot":""}]}