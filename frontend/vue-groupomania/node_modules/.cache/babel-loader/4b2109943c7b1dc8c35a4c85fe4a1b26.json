{"remainingRequest":"E:\\CharlesLippens_7_25042021-main (9)\\CharlesLippens_7_25042021-main\\frontend\\vue-groupomania\\node_modules\\babel-loader\\lib\\index.js!E:\\CharlesLippens_7_25042021-main (9)\\CharlesLippens_7_25042021-main\\frontend\\vue-groupomania\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\CharlesLippens_7_25042021-main (9)\\CharlesLippens_7_25042021-main\\frontend\\vue-groupomania\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!E:\\CharlesLippens_7_25042021-main (9)\\CharlesLippens_7_25042021-main\\frontend\\vue-groupomania\\src\\views\\Users.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\CharlesLippens_7_25042021-main (9)\\CharlesLippens_7_25042021-main\\frontend\\vue-groupomania\\src\\views\\Users.vue","mtime":1621897332122},{"path":"E:\\CharlesLippens_7_25042021-main (9)\\CharlesLippens_7_25042021-main\\frontend\\vue-groupomania\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\CharlesLippens_7_25042021-main (9)\\CharlesLippens_7_25042021-main\\frontend\\vue-groupomania\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\CharlesLippens_7_25042021-main (9)\\CharlesLippens_7_25042021-main\\frontend\\vue-groupomania\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\CharlesLippens_7_25042021-main (9)\\CharlesLippens_7_25042021-main\\frontend\\vue-groupomania\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHsgTm90eWYgfSBmcm9tICJub3R5ZiI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKaW1wb3J0ICJub3R5Zi9ub3R5Zi5taW4uY3NzIjsKaW1wb3J0IE5hdiBmcm9tICJAL2NvbXBvbmVudHMvTmF2LnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVXNlcnMiLAogIGNvbXBvbmVudHM6IHsKICAgIE5hdjogTmF2CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcjogIiIsCiAgICAgIHVzZXJzOiBbXSwKICAgICAgZXJyb3I6ICIiLAogICAgICByZXZlbGU6IGZhbHNlCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZGlzcGxheVVzZXIoKTsKICAgIHRoaXMubm90eWYgPSBuZXcgTm90eWYoewogICAgICBkdXJhdGlvbjogMjAwMCwKICAgICAgcG9zaXRpb246IHsKICAgICAgICB4OiAiY2VudGVyIiwKICAgICAgICB5OiAidG9wIgogICAgICB9CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGRlbGV0ZVVzZXI6IGZ1bmN0aW9uIGRlbGV0ZVVzZXIoa2V5KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgdXNlcklkID0ga2V5OwogICAgICBheGlvc1siZGVsZXRlIl0oImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvdXNlci8iICsgdXNlcklkLCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIiArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy5ub3R5Zi5zdWNjZXNzKCJMZSBjb21wdGUgYSBiaWVuIMOpdMOpIHN1cHByaW3DqSIpOwoKICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goIi9wb3N0Iik7CiAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHZhciBtc2dlcnJvciA9IGVycm9yLnJlc3BvbnNlLmRhdGE7CgogICAgICAgIF90aGlzLm5vdHlmLmVycm9yKG1zZ2Vycm9yLmVycm9yKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8gYWZmaWNoZXIgbGEgZGF0ZSBkZSBwdWJsaWNhdGlvbiBhdSBib24gZm9ybWF0CiAgICBkYXRlRm9ybWF0OiBmdW5jdGlvbiBkYXRlRm9ybWF0KGRhdGUpIHsKICAgICAgaWYgKGRhdGUpIHsKICAgICAgICByZXR1cm4gbW9tZW50KFN0cmluZyhkYXRlKSkuZm9ybWF0KCJERC9NTS9ZWVlZIik7CiAgICAgIH0KICAgIH0sCiAgICBkaXNwbGF5VXNlcjogZnVuY3Rpb24gZGlzcGxheVVzZXIoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgYXhpb3MuZ2V0KCJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3VzZXJzIiwgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIiArIGxvY2FsU3RvcmFnZS50b2tlbgogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczIudXNlcnMgPSByZXNwb25zZS5kYXRhLnVzZXJzOwogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["E:\\CharlesLippens_7_25042021-main (9)\\CharlesLippens_7_25042021-main\\frontend\\vue-groupomania\\src\\views\\Users.vue"],"names":[],"mappings":"AA2BA,OAAO,KAAP,MAAkB,OAAlB;AACA,SAAS,KAAT,QAAsB,OAAtB;AACA,OAAO,MAAP,MAAmB,QAAnB;AACA,OAAO,qBAAP;AAEA,OAAO,GAAP,MAAgB,sBAAhB;AAEA,eAAe;AACd,EAAA,IAAI,EAAE,OADQ;AAEd,EAAA,UAAU,EAAE;AACX,IAAA,GAAG,EAAH;AADW,GAFE;AAKd,EAAA,IALc,kBAKP;AACN,WAAO;AACN,MAAA,IAAI,EAAE,EADA;AAEN,MAAA,KAAK,EAAE,EAFD;AAGN,MAAA,KAAK,EAAE,EAHD;AAIN,MAAA,MAAM,EAAE;AAJF,KAAP;AAMA,GAZa;AAad,EAAA,OAbc,qBAaJ;AACT,SAAK,WAAL;AAEA,SAAK,KAAL,GAAa,IAAI,KAAJ,CAAU;AACtB,MAAA,QAAQ,EAAE,IADY;AAEtB,MAAA,QAAQ,EAAE;AACT,QAAA,CAAC,EAAE,QADM;AAET,QAAA,CAAC,EAAE;AAFM;AAFY,KAAV,CAAb;AAOA,GAvBa;AAwBd,EAAA,OAAO,EAAE;AACR,IAAA,UADQ,sBACG,GADH,EACQ;AAAA;;AACf,UAAM,MAAK,GAAI,GAAf;AAEA,MAAA,KAAI,UAAJ,CACS,oCAAoC,MAD7C,EACqD;AACnD,QAAA,OAAO,EAAE;AACR,0BAAgB,kBADR;AAER,UAAA,aAAa,EAAE,YAAY,YAAY,CAAC,OAAb,CAAqB,OAArB;AAFnB;AAD0C,OADrD,EAOE,IAPF,CAOO,YAAM;AACX,QAAA,KAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,+BAAnB;;AACA,QAAA,KAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,OAAlB;AACA,OAVF,WAWQ,UAAC,KAAD,EAAW;AACjB,YAAM,QAAO,GAAI,KAAK,CAAC,QAAN,CAAe,IAAhC;;AACA,QAAA,KAAI,CAAC,KAAL,CAAW,KAAX,CAAiB,QAAQ,CAAC,KAA1B;AACA,OAdF;AAeA,KAnBO;AAqBR;AACA,IAAA,UAtBQ,sBAsBG,IAtBH,EAsBS;AAChB,UAAI,IAAJ,EAAU;AACT,eAAO,MAAM,CAAC,MAAM,CAAC,IAAD,CAAP,CAAN,CAAqB,MAArB,CAA4B,YAA5B,CAAP;AACD;AACA,KA1BO;AA4BR,IAAA,WA5BQ,yBA4BM;AAAA;;AACb,MAAA,KAAI,CACF,GADF,CACM,uCADN,EAC+C;AAC7C,QAAA,OAAO,EAAE;AAAE,UAAA,aAAa,EAAE,YAAY,YAAY,CAAC;AAA1C;AADoC,OAD/C,EAIE,IAJF,CAIO,UAAC,QAAD,EAAc;AACnB,QAAA,MAAI,CAAC,KAAL,GAAa,QAAQ,CAAC,IAAT,CAAc,KAA3B;AACA,OANF,WAOQ,UAAC,GAAD;AAAA,eAAS,OAAO,CAAC,GAAR,CAAY,GAAZ,CAAT;AAAA,OAPR;AAQA;AArCO;AAxBK,CAAf","sourcesContent":["<template>\n\t<div>\n\t\t<Nav />\n\t\t<div class=\"bg\">\n\t\t\t<div class=\"field\">\n\t\t\t\t<h1>Groupomania Users</h1>\n\t\t\t\t<hr />\n\t\t\t\t<div class=\"content\">\n\t\t\t\t\t<div class=\"test\" v-for=\"user in users\" :key=\"user.id\">\n\t\t\t\t\t\t<p class=\"title font-weight-bold\">ID : {{ user.id }}</p>\n\t\t\t\t\t\t<p class=\"title font-weight-bold\">Pseudo : {{ user.username }}</p>\n\t\t\t\t\t\t<p class=\"title font-weight-bold\">\n\t\t\t\t\t\t\tCréé le : {{ dateFormat(user.createdAt) }}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p class=\"title font-weight-bold\">Email : {{ user.email }}</p>\n\t\t\t\t\t\t<button class=\"users-list_delete-link\" @click=\"deleteUser(user.id)\">\n\t\t\t\t\t\t\t<i class=\"far fa-trash-alt\"></i>Supprimer\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { Notyf } from \"notyf\";\nimport moment from \"moment\";\nimport \"notyf/notyf.min.css\";\n\nimport Nav from \"@/components/Nav.vue\";\n\nexport default {\n\tname: \"Users\",\n\tcomponents: {\n\t\tNav,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tuser: \"\",\n\t\t\tusers: [],\n\t\t\terror: \"\",\n\t\t\trevele: false,\n\t\t};\n\t},\n\tcreated() {\n\t\tthis.displayUser();\n\n\t\tthis.notyf = new Notyf({\n\t\t\tduration: 2000,\n\t\t\tposition: {\n\t\t\t\tx: \"center\",\n\t\t\t\ty: \"top\",\n\t\t\t},\n\t\t});\n\t},\n\tmethods: {\n\t\tdeleteUser(key) {\n\t\t\tconst userId = key;\n\n\t\t\taxios\n\t\t\t\t.delete(\"http://localhost:3000/api/user/\" + userId, {\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\tAuthorization: \"Bearer \" + localStorage.getItem(\"token\"),\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.notyf.success(\"Le compte a bien été supprimé\");\n\t\t\t\t\tthis.$router.push(\"/post\");\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconst msgerror = error.response.data;\n\t\t\t\t\tthis.notyf.error(msgerror.error);\n\t\t\t\t});\n\t\t},\n\n\t\t// afficher la date de publication au bon format\n\t\tdateFormat(date) {\n\t\t\tif (date) {\n\t\t\t\treturn moment(String(date)).format(\"DD/MM/YYYY\");\n\t\t\t}\n\t\t},\n\n\t\tdisplayUser() {\n\t\t\taxios\n\t\t\t\t.get(\"http://localhost:3000/api/admin/users\", {\n\t\t\t\t\theaders: { Authorization: \"Bearer \" + localStorage.token },\n\t\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.users = response.data.users;\n\t\t\t\t})\n\t\t\t\t.catch((err) => console.log(err));\n\t\t},\n\t},\n};\n</script>\n<style scoped lang=\"scss\">\n.bg {\n\tbackground: rgb(228, 225, 225);\n\tbackground-size: cover, contain;\n\theight: 100vh;\n}\n\nh1,\nh2 {\n\tmargin-top: 2rem;\n}\n.test {\n\tborder: solid;\n\tborder-radius: 5px;\n\tbackground-color: white;\n\tpadding: 10px;\n\tmargin: 0px 10px 10px 0px;\n}\n\n.content {\n\tdisplay: flex;\n\tflex-direction: row;\n\tflex-wrap: wrap;\n\tjustify-content: center;\n\talign-items: center;\n\tmin-width: 40%;\n\tmax-width: 80%;\n\tmargin: 3rem auto;\n\tborder-radius: 25px;\n\n\t@media (max-width: 500px) {\n\t\tmin-width: 80%;\n\t}\n}\n</style>\n"],"sourceRoot":""}]}